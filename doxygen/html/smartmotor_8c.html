<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Convex: C:/projects/vex/cortex/opt/smartmotor.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" class="pageheader">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="convex_logo.png"/></td>
  <td width="100%" align="center" valign="bottom"></td>
  <td align="right"></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('smartmotor_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">smartmotor.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A port of the smart motor library for ChibiOS/RT.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="smartmotor_8h_source.html">smartmotor.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="robotc__glue_8h_source.html">robotc_glue.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fastmath_8c.html">fastmath.c</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7d44058bf6d58da66cbd99c61cfbc639"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsmart_motor.html">smartMotor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a7d44058bf6d58da66cbd99c61cfbc639">SmartMotorGetPtr</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index)</td></tr>
<tr class="memdesc:a7d44058bf6d58da66cbd99c61cfbc639"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get pointer to <a class="el" href="structsmart_motor.html">smartMotor</a> structure - not used locally.  <a href="#a7d44058bf6d58da66cbd99c61cfbc639">More...</a><br/></td></tr>
<tr class="separator:a7d44058bf6d58da66cbd99c61cfbc639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca350fdeab68b0c71c8df78c86b497f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a8ca350fdeab68b0c71c8df78c86b497f">SmartMotorControllerGetPtr</a> (short index)</td></tr>
<tr class="memdesc:a8ca350fdeab68b0c71c8df78c86b497f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get pointer to smartController structure - not used locally.  <a href="#a8ca350fdeab68b0c71c8df78c86b497f">More...</a><br/></td></tr>
<tr class="separator:a8ca350fdeab68b0c71c8df78c86b497f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a508729e7582e59f5fcfc5c85d0fcb644"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a508729e7582e59f5fcfc5c85d0fcb644">SmartMotorGetSpeed</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index)</td></tr>
<tr class="memdesc:a508729e7582e59f5fcfc5c85d0fcb644"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Motor speed.  <a href="#a508729e7582e59f5fcfc5c85d0fcb644">More...</a><br/></td></tr>
<tr class="separator:a508729e7582e59f5fcfc5c85d0fcb644"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2370585f658aa24f640eaf01234cdc78"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a2370585f658aa24f640eaf01234cdc78">_SmartMotorGetCurrent</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index, int s,...)</td></tr>
<tr class="memdesc:a2370585f658aa24f640eaf01234cdc78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Motor current.  <a href="#a2370585f658aa24f640eaf01234cdc78">More...</a><br/></td></tr>
<tr class="separator:a2370585f658aa24f640eaf01234cdc78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e4301736618b16e1f840ef14af52376"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a6e4301736618b16e1f840ef14af52376">SmartMotorGetTemperature</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index)</td></tr>
<tr class="memdesc:a6e4301736618b16e1f840ef14af52376"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Motor temperature.  <a href="#a6e4301736618b16e1f840ef14af52376">More...</a><br/></td></tr>
<tr class="separator:a6e4301736618b16e1f840ef14af52376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee31e9da2d707ac77d438831ab68b9ca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#aee31e9da2d707ac77d438831ab68b9ca">SmartMotorGetLimitCmd</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index)</td></tr>
<tr class="memdesc:aee31e9da2d707ac77d438831ab68b9ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Motor command limit.  <a href="#aee31e9da2d707ac77d438831ab68b9ca">More...</a><br/></td></tr>
<tr class="separator:aee31e9da2d707ac77d438831ab68b9ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fb816815baea9d44c3f812a88759330"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a6fb816815baea9d44c3f812a88759330">_SmartMotorSetLimitCurent</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index, float current,...)</td></tr>
<tr class="memdesc:a6fb816815baea9d44c3f812a88759330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Motor current limit.  <a href="#a6fb816815baea9d44c3f812a88759330">More...</a><br/></td></tr>
<tr class="separator:a6fb816815baea9d44c3f812a88759330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a4a6c5a731ca7889c80f83791531a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a27a4a6c5a731ca7889c80f83791531a1">SmartMotorSetFreeRpm</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index, short max_rpm)</td></tr>
<tr class="memdesc:a27a4a6c5a731ca7889c80f83791531a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Motor maximum rpm.  <a href="#a27a4a6c5a731ca7889c80f83791531a1">More...</a><br/></td></tr>
<tr class="separator:a27a4a6c5a731ca7889c80f83791531a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9bb54b61dddaed512ee609db60dd272"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#af9bb54b61dddaed512ee609db60dd272">SmartMotorSetSlewRate</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index, int slew_rate)</td></tr>
<tr class="memdesc:af9bb54b61dddaed512ee609db60dd272"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Motor slew rate.  <a href="#af9bb54b61dddaed512ee609db60dd272">More...</a><br/></td></tr>
<tr class="separator:af9bb54b61dddaed512ee609db60dd272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea0865838afe94f1e9f35fe12e6e4f9"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a7ea0865838afe94f1e9f35fe12e6e4f9">SmartMotorGetControllerCurrent</a> (short index)</td></tr>
<tr class="memdesc:a7ea0865838afe94f1e9f35fe12e6e4f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Controller current.  <a href="#a7ea0865838afe94f1e9f35fe12e6e4f9">More...</a><br/></td></tr>
<tr class="separator:a7ea0865838afe94f1e9f35fe12e6e4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dee899c49cbfda9ac76950263ba1244"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a2dee899c49cbfda9ac76950263ba1244">SmartMotorGetControllerTemperature</a> (short index)</td></tr>
<tr class="memdesc:a2dee899c49cbfda9ac76950263ba1244"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Controller temperature.  <a href="#a2dee899c49cbfda9ac76950263ba1244">More...</a><br/></td></tr>
<tr class="separator:a2dee899c49cbfda9ac76950263ba1244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6faa54fa874397c29fce371c5f97b0e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a6faa54fa874397c29fce371c5f97b0e7">SmartMotorSetControllerStatusLed</a> (int index, <a class="el" href="vexdigital_8h.html#ada6c474f1f434058485c115c087767ca">tVexDigitalPin</a> port)</td></tr>
<tr class="memdesc:a6faa54fa874397c29fce371c5f97b0e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Controller status LED.  <a href="#a6faa54fa874397c29fce371c5f97b0e7">More...</a><br/></td></tr>
<tr class="separator:a6faa54fa874397c29fce371c5f97b0e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac844e981b27f5c1af76547e1b9924e7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#ac844e981b27f5c1af76547e1b9924e7c">SmartMotorSetPowerExpanderStatusPort</a> (<a class="el" href="vexanalog_8h.html#ab4e1c36487e5604a953fd4112fa1a8e9">tVexAnalogPin</a> port)</td></tr>
<tr class="memdesc:ac844e981b27f5c1af76547e1b9924e7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set power expander status port.  <a href="#ac844e981b27f5c1af76547e1b9924e7c">More...</a><br/></td></tr>
<tr class="separator:ac844e981b27f5c1af76547e1b9924e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a904612dd738c965769a62093603b1c2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a904612dd738c965769a62093603b1c2f">SmartMotorPtcMonitorEnable</a> ()</td></tr>
<tr class="memdesc:a904612dd738c965769a62093603b1c2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable current limit by monitoring the PTC temperatures.  <a href="#a904612dd738c965769a62093603b1c2f">More...</a><br/></td></tr>
<tr class="separator:a904612dd738c965769a62093603b1c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f0197a2264c27235ce1e880710374f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a8f0197a2264c27235ce1e880710374f3">SmartMotorPtcMonitorDisable</a> ()</td></tr>
<tr class="memdesc:a8f0197a2264c27235ce1e880710374f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable current limit by monitoring the PTC temperatures.  <a href="#a8f0197a2264c27235ce1e880710374f3">More...</a><br/></td></tr>
<tr class="separator:a8f0197a2264c27235ce1e880710374f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a020fdcd1790e710d138e7d61b7e0dd37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a020fdcd1790e710d138e7d61b7e0dd37">SmartMotorCurrentMonitorEnable</a> ()</td></tr>
<tr class="memdesc:a020fdcd1790e710d138e7d61b7e0dd37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable current limit by using a preset threshold.  <a href="#a020fdcd1790e710d138e7d61b7e0dd37">More...</a><br/></td></tr>
<tr class="separator:a020fdcd1790e710d138e7d61b7e0dd37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a227e5bfde789cec3d0b83cc9d3549914"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a227e5bfde789cec3d0b83cc9d3549914">SmartMotorCurrentMonitorDisable</a> ()</td></tr>
<tr class="memdesc:a227e5bfde789cec3d0b83cc9d3549914"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable current limit by using a preset threshold.  <a href="#a227e5bfde789cec3d0b83cc9d3549914">More...</a><br/></td></tr>
<tr class="separator:a227e5bfde789cec3d0b83cc9d3549914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab976ab79d0bf527bbf7fa07e443fb42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#aab976ab79d0bf527bbf7fa07e443fb42">SmartMotorRun</a> ()</td></tr>
<tr class="memdesc:aab976ab79d0bf527bbf7fa07e443fb42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the smart motor monitoring.  <a href="#aab976ab79d0bf527bbf7fa07e443fb42">More...</a><br/></td></tr>
<tr class="separator:aab976ab79d0bf527bbf7fa07e443fb42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e7dbe80bdac2566db9b3a5fcf39f4cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a4e7dbe80bdac2566db9b3a5fcf39f4cd">SmartMotorStop</a> ()</td></tr>
<tr class="memdesc:a4e7dbe80bdac2566db9b3a5fcf39f4cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop smart motor tasks.  <a href="#a4e7dbe80bdac2566db9b3a5fcf39f4cd">More...</a><br/></td></tr>
<tr class="separator:a4e7dbe80bdac2566db9b3a5fcf39f4cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a4557f565013b4d0ba6da748b0e1545"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a9a4557f565013b4d0ba6da748b0e1545">SmartMotorDebugStatus</a> ()</td></tr>
<tr class="memdesc:a9a4557f565013b4d0ba6da748b0e1545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump controller and motor status to the debug stream.  <a href="#a9a4557f565013b4d0ba6da748b0e1545">More...</a><br/></td></tr>
<tr class="separator:a9a4557f565013b4d0ba6da748b0e1545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00cc3c5f3aeec6476139ca32baadf63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#af00cc3c5f3aeec6476139ca32baadf63">_SetMotor</a> (int index, int value, bool_t immediate,...)</td></tr>
<tr class="memdesc:af00cc3c5f3aeec6476139ca32baadf63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set motor to value.  <a href="#af00cc3c5f3aeec6476139ca32baadf63">More...</a><br/></td></tr>
<tr class="separator:af00cc3c5f3aeec6476139ca32baadf63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2be3709e56aca10845831edf10907f8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a2be3709e56aca10845831edf10907f8b">SmartMotorsInit</a> ()</td></tr>
<tr class="memdesc:a2be3709e56aca10845831edf10907f8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the <a class="el" href="structsmart_motor.html">smartMotor</a> library.  <a href="#a2be3709e56aca10845831edf10907f8b">More...</a><br/></td></tr>
<tr class="separator:a2be3709e56aca10845831edf10907f8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7ebb6f77c993c91003bc393b7df48c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#af7ebb6f77c993c91003bc393b7df48c9">SmartMotorLinkMotors</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> master, <a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> slave)</td></tr>
<tr class="memdesc:af7ebb6f77c993c91003bc393b7df48c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Link two motors.  <a href="#af7ebb6f77c993c91003bc393b7df48c9">More...</a><br/></td></tr>
<tr class="separator:af7ebb6f77c993c91003bc393b7df48c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a0a2b9697fd209af3a4e30d3519551c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a1a0a2b9697fd209af3a4e30d3519551c">SmartMotorsSetEncoderGearing</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index, float ratio)</td></tr>
<tr class="memdesc:a1a0a2b9697fd209af3a4e30d3519551c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the encoder gearing.  <a href="#a1a0a2b9697fd209af3a4e30d3519551c">More...</a><br/></td></tr>
<tr class="separator:a1a0a2b9697fd209af3a4e30d3519551c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac620eaa25a2d711bde154e7bcdefec28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#ac620eaa25a2d711bde154e7bcdefec28">_SmartMotorsAddPowerExtender</a> (int p0, int p1, int p2, int p3,...)</td></tr>
<tr class="memdesc:ac620eaa25a2d711bde154e7bcdefec28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a power extender to the system.  <a href="#ac620eaa25a2d711bde154e7bcdefec28">More...</a><br/></td></tr>
<tr class="separator:ac620eaa25a2d711bde154e7bcdefec28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8031e89f924d781680d357b785552b99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a8031e89f924d781680d357b785552b99">_SmartMotorSetRpmSensor</a> (<a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a> index, <a class="el" href="vexanalog_8h.html#ab4e1c36487e5604a953fd4112fa1a8e9">tVexAnalogPin</a> port, float ticks_per_rev, bool_t reversed,...)</td></tr>
<tr class="memdesc:a8031e89f924d781680d357b785552b99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign (non encoder) sensor for rpm measurement.  <a href="#a8031e89f924d781680d357b785552b99">More...</a><br/></td></tr>
<tr class="separator:a8031e89f924d781680d357b785552b99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa144c95835a3a6f710c4dda3b7ca8f1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#aa144c95835a3a6f710c4dda3b7ca8f1f">SmartMotorSpeed</a> (<a class="el" href="structsmart_motor.html">smartMotor</a> *m, int deltaTime)</td></tr>
<tr class="memdesc:aa144c95835a3a6f710c4dda3b7ca8f1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate speed in rpm for the motor  <a href="#aa144c95835a3a6f710c4dda3b7ca8f1f">More...</a><br/></td></tr>
<tr class="separator:aa144c95835a3a6f710c4dda3b7ca8f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2067868646a1fc6320aae4ef966b21f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#ac2067868646a1fc6320aae4ef966b21f">SmartMotorSimulateSpeed</a> (<a class="el" href="structsmart_motor.html">smartMotor</a> *m)</td></tr>
<tr class="memdesc:ac2067868646a1fc6320aae4ef966b21f"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate a simulated speed in rpm for a motor  <a href="#ac2067868646a1fc6320aae4ef966b21f">More...</a><br/></td></tr>
<tr class="separator:ac2067868646a1fc6320aae4ef966b21f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b57da940b231cb46537e25a798e2605"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a0b57da940b231cb46537e25a798e2605">SmartMotorCurrent</a> (<a class="el" href="structsmart_motor.html">smartMotor</a> *m, float v_battery)</td></tr>
<tr class="memdesc:a0b57da940b231cb46537e25a798e2605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate smart motor current.  <a href="#a0b57da940b231cb46537e25a798e2605">More...</a><br/></td></tr>
<tr class="separator:a0b57da940b231cb46537e25a798e2605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b466ecd01cce0df66c503b9043e5872"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a3b466ecd01cce0df66c503b9043e5872">SmartMotorControllerCurrent</a> (<a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a> *s)</td></tr>
<tr class="memdesc:a3b466ecd01cce0df66c503b9043e5872"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the current for a controller bank.  <a href="#a3b466ecd01cce0df66c503b9043e5872">More...</a><br/></td></tr>
<tr class="separator:a3b466ecd01cce0df66c503b9043e5872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53b90aedd12a70d0e6bacd976fd1360e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a53b90aedd12a70d0e6bacd976fd1360e">SmartMotorSafeCommand</a> (<a class="el" href="structsmart_motor.html">smartMotor</a> *m, float v_battery)</td></tr>
<tr class="memdesc:a53b90aedd12a70d0e6bacd976fd1360e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate safe current command.  <a href="#a53b90aedd12a70d0e6bacd976fd1360e">More...</a><br/></td></tr>
<tr class="separator:a53b90aedd12a70d0e6bacd976fd1360e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af34b0a6188274246212c7ac78f81e045"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#af34b0a6188274246212c7ac78f81e045">SmartMotorTemperature</a> (<a class="el" href="structsmart_motor.html">smartMotor</a> *m, int deltaTime)</td></tr>
<tr class="memdesc:af34b0a6188274246212c7ac78f81e045"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the PTC temperature for a motor.  <a href="#af34b0a6188274246212c7ac78f81e045">More...</a><br/></td></tr>
<tr class="separator:af34b0a6188274246212c7ac78f81e045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a211427153976aefbc636a1b966d3dbe0"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a211427153976aefbc636a1b966d3dbe0">SmartMotorControllerTemperature</a> (<a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a> *s, int deltaTime)</td></tr>
<tr class="memdesc:a211427153976aefbc636a1b966d3dbe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the PTC temperature for a controller bank.  <a href="#a211427153976aefbc636a1b966d3dbe0">More...</a><br/></td></tr>
<tr class="separator:a211427153976aefbc636a1b966d3dbe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fcbaf9a9c8018c10ac8a8d5d3cb56a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a3fcbaf9a9c8018c10ac8a8d5d3cb56a4">SmartMotorMonitorPtc</a> (<a class="el" href="structsmart_motor.html">smartMotor</a> *m, float v_battery)</td></tr>
<tr class="memdesc:a3fcbaf9a9c8018c10ac8a8d5d3cb56a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Monitor Motor PTC temperature.  <a href="#a3fcbaf9a9c8018c10ac8a8d5d3cb56a4">More...</a><br/></td></tr>
<tr class="separator:a3fcbaf9a9c8018c10ac8a8d5d3cb56a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c365193c6178e1674b08b09b5ae91c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a18c365193c6178e1674b08b09b5ae91c">SmartMotorControllerMonitorPtc</a> (<a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a> *s, float v_battery)</td></tr>
<tr class="memdesc:a18c365193c6178e1674b08b09b5ae91c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Monitor controller bank PTC temperature.  <a href="#a18c365193c6178e1674b08b09b5ae91c">More...</a><br/></td></tr>
<tr class="separator:a18c365193c6178e1674b08b09b5ae91c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad671e19c837b6b1f3ae95bf85d4f2166"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#ad671e19c837b6b1f3ae95bf85d4f2166">SmartMotorMonitorCurrent</a> (<a class="el" href="structsmart_motor.html">smartMotor</a> *m, float v_battery)</td></tr>
<tr class="memdesc:ad671e19c837b6b1f3ae95bf85d4f2166"><td class="mdescLeft">&#160;</td><td class="mdescRight">Monitor Motor Current.  <a href="#ad671e19c837b6b1f3ae95bf85d4f2166">More...</a><br/></td></tr>
<tr class="separator:ad671e19c837b6b1f3ae95bf85d4f2166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a824d6d1c9472b7f86b3cf07a233144e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a824d6d1c9472b7f86b3cf07a233144e5">SmartMotorControllerSetLed</a> (<a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a> *s)</td></tr>
<tr class="memdesc:a824d6d1c9472b7f86b3cf07a233144e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current monitor LED on or off.  <a href="#a824d6d1c9472b7f86b3cf07a233144e5">More...</a><br/></td></tr>
<tr class="separator:a824d6d1c9472b7f86b3cf07a233144e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affafa43d662163258c459227c42c32b9"><td class="memItemLeft" align="right" valign="top">msg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#affafa43d662163258c459227c42c32b9">SmartMotorTask</a> (void *arg)</td></tr>
<tr class="memdesc:affafa43d662163258c459227c42c32b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The smart motor task.  <a href="#affafa43d662163258c459227c42c32b9">More...</a><br/></td></tr>
<tr class="separator:affafa43d662163258c459227c42c32b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e1dfd9a54afaeb2f0cd8ec6d1de4e9c"><td class="memItemLeft" align="right" valign="top">msg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="smartmotor_8c.html#a7e1dfd9a54afaeb2f0cd8ec6d1de4e9c">SmartMotorSlewRateTask</a> (void *arg)</td></tr>
<tr class="memdesc:a7e1dfd9a54afaeb2f0cd8ec6d1de4e9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The motor slew rate task.  <a href="#a7e1dfd9a54afaeb2f0cd8ec6d1de4e9c">More...</a><br/></td></tr>
<tr class="separator:a7e1dfd9a54afaeb2f0cd8ec6d1de4e9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A port of the smart motor library for ChibiOS/RT. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7d44058bf6d58da66cbd99c61cfbc639"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsmart_motor.html">smartMotor</a>* SmartMotorGetPtr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get pointer to <a class="el" href="structsmart_motor.html">smartMotor</a> structure - not used locally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8ca350fdeab68b0c71c8df78c86b497f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a>* SmartMotorControllerGetPtr </td>
          <td>(</td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get pointer to smartController structure - not used locally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a508729e7582e59f5fcfc5c85d0fcb644"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SmartMotorGetSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Motor speed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The motor speed as rpm </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="clawbot_8c-example.html#a66">clawbot.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a2370585f658aa24f640eaf01234cdc78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float _SmartMotorGetCurrent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Motor current. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>Set as 1 for signed current otherwise absolute is returned </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The motor current in amps </dd></dl>

</div>
</div>
<a class="anchor" id="a6e4301736618b16e1f840ef14af52376"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SmartMotorGetTemperature </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Motor temperature. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The motor temperature in deg C </dd></dl>

</div>
</div>
<a class="anchor" id="aee31e9da2d707ac77d438831ab68b9ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SmartMotorGetLimitCmd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Motor command limit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The motor maximum command value </dd></dl>

</div>
</div>
<a class="anchor" id="a6fb816815baea9d44c3f812a88759330"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _SmartMotorSetLimitCurent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Motor current limit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">current</td><td>The maximum motor current </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Do not use this function directly, instead use the macro SmartMotorSetLimitCurent which allows a default value for current of 1.0A </dd></dl>

</div>
</div>
<a class="anchor" id="a27a4a6c5a731ca7889c80f83791531a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorSetFreeRpm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>max_rpm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Motor maximum rpm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_rpm</td><td>The maximum motor rpm </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af9bb54b61dddaed512ee609db60dd272"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorSetSlewRate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slew_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Motor slew rate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slew_rate</td><td>The maximum motor slew_rate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7ea0865838afe94f1e9f35fe12e6e4f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SmartMotorGetControllerCurrent </td>
          <td>(</td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Controller current. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor controller index (0, 1 or 2) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The motor controller current in amps </dd></dl>

</div>
</div>
<a class="anchor" id="a2dee899c49cbfda9ac76950263ba1244"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SmartMotorGetControllerTemperature </td>
          <td>(</td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>index</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Controller temperature. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor controller index (0, 1 or 2) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The motor controller temperature in deg C </dd></dl>

</div>
</div>
<a class="anchor" id="a6faa54fa874397c29fce371c5f97b0e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorSetControllerStatusLed </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vexdigital_8h.html#ada6c474f1f434058485c115c087767ca">tVexDigitalPin</a>&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Controller status LED. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor controller index (0, 1 or 2) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>The digital port that the led is connected to</td></tr>
  </table>
  </dd>
</dl>
<p>This function allows an led to be assigned to a controller bank that is illuminated when any motor on that bank trips the ptc or exceeds the preset current limit </p>

</div>
</div>
<a class="anchor" id="ac844e981b27f5c1af76547e1b9924e7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorSetPowerExpanderStatusPort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexanalog_8h.html#ab4e1c36487e5604a953fd4112fa1a8e9">tVexAnalogPin</a>&#160;</td>
          <td class="paramname"><em>port</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set power expander status port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>The analog port for status from the power expander</td></tr>
  </table>
  </dd>
</dl>
<p>This allows the battery voltage of the power expander to be monitored. Monitoring occurs after the ptc in the power expander so can be used to cut power to those motors if necessary. </p>

</div>
</div>
<a class="anchor" id="a904612dd738c965769a62093603b1c2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorPtcMonitorEnable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable current limit by monitoring the PTC temperatures. </p>

</div>
</div>
<a class="anchor" id="a8f0197a2264c27235ce1e880710374f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorPtcMonitorDisable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable current limit by monitoring the PTC temperatures. </p>

</div>
</div>
<a class="anchor" id="a020fdcd1790e710d138e7d61b7e0dd37"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorCurrentMonitorEnable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable current limit by using a preset threshold. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="clawbot_8c-example.html#a84">clawbot.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a227e5bfde789cec3d0b83cc9d3549914"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorCurrentMonitorDisable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable current limit by using a preset threshold. </p>

</div>
</div>
<a class="anchor" id="aab976ab79d0bf527bbf7fa07e443fb42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorRun </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the smart motor monitoring. </p>
<p>After initialization the smart motor tasks need to be started </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="clawbot_8c-example.html#a85">clawbot.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a4e7dbe80bdac2566db9b3a5fcf39f4cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorStop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop smart motor tasks. </p>

</div>
</div>
<a class="anchor" id="a9a4557f565013b4d0ba6da748b0e1545"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorDebugStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump controller and motor status to the debug stream. </p>

</div>
</div>
<a class="anchor" id="af00cc3c5f3aeec6476139ca32baadf63"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _SetMotor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool_t&#160;</td>
          <td class="paramname"><em>immediate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set motor to value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The motor control value (speed) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">immediate</td><td>If TRUE then bypass the slew rate control</td></tr>
  </table>
  </dd>
</dl>
<p>Set a new control value for the motor. This is the only call that should be used to change motor speed. Using vexMotorSet will completely bugger up the code - do not use it</p>
<p>The naming of this function is inconsistent with the rest of the library to allow backwards compatibility with team 8888's existing library </p>

</div>
</div>
<a class="anchor" id="a2be3709e56aca10845831edf10907f8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorsInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the <a class="el" href="structsmart_motor.html">smartMotor</a> library. </p>
<p>Initialize the smart motor library - This function must be called once when the program starts. Motors are automatically detected and assigned to the cortex banls, if a power expander is used then it should be added by using the SmartMotorsAddPowerExtender function after calling SmartMotorsInit </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="clawbot_8c-example.html#a83">clawbot.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="af7ebb6f77c993c91003bc393b7df48c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorLinkMotors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>master</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>slave</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Link two motors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">master</td><td>The master motor (usually with an encoder) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slave</td><td>The slave motor (usually un-encoded)</td></tr>
  </table>
  </dd>
</dl>
<p>This lets us use encoder counts from one motor for another motor. </p>

</div>
</div>
<a class="anchor" id="a1a0a2b9697fd209af3a4e30d3519551c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorsSetEncoderGearing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ratio</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the encoder gearing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ratio</td><td>The gear ratio</td></tr>
  </table>
  </dd>
</dl>
<p>If using a quad encoder then it may not be directly connected to the motor. This function allows a change of gearing by changing the ticks per rpm. Only call this function once per motor after calling init</p>
<p>ratio is encoder revs/motor revs </p>

</div>
</div>
<a class="anchor" id="ac620eaa25a2d711bde154e7bcdefec28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _SmartMotorsAddPowerExtender </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a power extender to the system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p0</td><td>The first power expander motor port </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p1</td><td>The second power expander motor port </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p2</td><td>The third power expander motor port </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p3</td><td>The fourth power expander motor port</td></tr>
  </table>
  </dd>
</dl>
<p>This function reassigns up to four motors to a power expander rather than ports on the cortex.</p>
<p>There is a macro SmartMotorsAddPowerExtender for ROBOTC compatibility</p>
<div class="fragment"><div class="line"><span class="comment">// the motor on port4 is assigned to the power expander</span></div>
<div class="line"><a class="code" href="smartmotor_8h.html#a43541bd57f154397cee046254e8b1b21">SmartMotorsAddPowerExtender</a>( <a class="code" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97ad6e09eab140b8bc4e0fd4f2abff869b4">kVexMotor_4</a> );</div>
<div class="line"></div>
<div class="line"><span class="comment">// three motors are assigned to the power expander</span></div>
<div class="line"><a class="code" href="smartmotor_8h.html#a43541bd57f154397cee046254e8b1b21">SmartMotorsAddPowerExtender</a>( ArmMotorA, ArmMotorB, ArmMotorC );</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a8031e89f924d781680d357b785552b99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _SmartMotorSetRpmSensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vexmotor_8h.html#a1233a4fb09fef02c962ccec318e00c97">tVexMotor</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vexanalog_8h.html#ab4e1c36487e5604a953fd4112fa1a8e9">tVexAnalogPin</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ticks_per_rev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool_t&#160;</td>
          <td class="paramname"><em>reversed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assign (non encoder) sensor for rpm measurement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>The motor index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>The sensor port </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ticks_per_rev</td><td>ticks per rovolution for this sensor </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reversed</td><td>A bool indicating motor direction is reversed</td></tr>
  </table>
  </dd>
</dl>
<p>This function can be used to assign any sensor to a motor for calculating rpm, the most likely situation would be a potentiometer. The parameter ticks_per_rev is the sensor change for one revolution of the motor, for example, a potentiometer with 1:1 gearing has about 6000 ticks_per_rev, if the gearing was 7:1 then this would be reduced to about 857. Set reversed to true if the potentiometer value decreases with positive motor command values. </p>

</div>
</div>
<a class="anchor" id="aa144c95835a3a6f710c4dda3b7ca8f1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmart_motor.html">smartMotor</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deltaTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculate speed in rpm for the motor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to <a class="el" href="structsmart_motor.html">smartMotor</a> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">deltaTime</td><td>The time in mS from the last call to this function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only </dd></dl>

</div>
</div>
<a class="anchor" id="ac2067868646a1fc6320aae4ef966b21f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorSimulateSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmart_motor.html">smartMotor</a> *&#160;</td>
          <td class="paramname"><em>m</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculate a simulated speed in rpm for a motor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to <a class="el" href="structsmart_motor.html">smartMotor</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only </dd></dl>
<dl class="section note"><dt>Note</dt><dd>We needed to do something for motors which do not have encoders and are also not coupled to another motor and able to share its encoder </dd></dl>

</div>
</div>
<a class="anchor" id="a0b57da940b231cb46537e25a798e2605"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SmartMotorCurrent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmart_motor.html">smartMotor</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>v_battery</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Estimate smart motor current. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to <a class="el" href="structsmart_motor.html">smartMotor</a> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_battery</td><td>The battery voltage in volts </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated current </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only</dd></dl>
<p>Estimate current in Vex motor using vamfun's algorithm.<br/>
 subroutine written by Vamfun...Mentor Vex 1508, 599.<br/>
 7.13.2012 <a href="#" onclick="location.href='mai'+'lto:'+'vam'+'fu'+'n@y'+'ah'+'oo.'+'co'+'m'; return false;">vamfu<span style="display: none;">.nosp@m.</span>n@ya<span style="display: none;">.nosp@m.</span>hoo.c<span style="display: none;">.nosp@m.</span>om</a>... blog info <a href="http://vamfun.wordpress.com">http://vamfun.wordpress.com</a><br/>
</p>
<p>Modified by James Pearman 7.28.2012.<br/>
 Modified by James Pearman 10.1.2012 - more generalized code.<br/>
</p>
<p>If cmd is positive then rpm must also be positive for this to work. </p>

</div>
</div>
<a class="anchor" id="a3b466ecd01cce0df66c503b9043e5872"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SmartMotorControllerCurrent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a> *&#160;</td>
          <td class="paramname"><em>s</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the current for a controller bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>A pointer to a smartController structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated current </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only </dd></dl>

</div>
</div>
<a class="anchor" id="a53b90aedd12a70d0e6bacd976fd1360e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SmartMotorSafeCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmart_motor.html">smartMotor</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>v_battery</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate safe current command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to <a class="el" href="structsmart_motor.html">smartMotor</a> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_battery</td><td>The battery voltage in volts </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated command value </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only</dd></dl>
<p>Calculate a command for the motor which will result in a target current based on motor speed.</p>
<p>target_current should be set prior to calling the function and must be POSITIVE.</p>
<p>If command direction and rpm are not of the same polarity then this function tends to fallover due to back emf being of opposite direction to the drive direction. In this situation we have no choice but to let current go higher as the motor is changing directions and will in effect stall as it does through zero. </p>

</div>
</div>
<a class="anchor" id="af34b0a6188274246212c7ac78f81e045"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SmartMotorTemperature </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmart_motor.html">smartMotor</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deltaTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the PTC temperature for a motor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to <a class="el" href="structsmart_motor.html">smartMotor</a> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">deltaTime</td><td>The time in mS from the last call to this function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated ptc temperature </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only </dd></dl>
<dl class="section note"><dt>Note</dt><dd>math by vamfun </dd></dl>

</div>
</div>
<a class="anchor" id="a211427153976aefbc636a1b966d3dbe0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SmartMotorControllerTemperature </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deltaTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the PTC temperature for a controller bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>Pointer to smartController structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">deltaTime</td><td>The time in mS from the last call to this function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated ptc temperature </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only </dd></dl>
<dl class="section note"><dt>Note</dt><dd>math by vamfun </dd></dl>

</div>
</div>
<a class="anchor" id="a3fcbaf9a9c8018c10ac8a8d5d3cb56a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorMonitorPtc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmart_motor.html">smartMotor</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>v_battery</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Monitor Motor PTC temperature. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to <a class="el" href="structsmart_motor.html">smartMotor</a> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_battery</td><td>The battery voltage in volts </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only</dd></dl>
<p>If the temperature is above the set point then calculate a command that will result in a safe current </p>

</div>
</div>
<a class="anchor" id="a18c365193c6178e1674b08b09b5ae91c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorControllerMonitorPtc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>v_battery</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Monitor controller bank PTC temperature. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>Pointer to smartController structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_battery</td><td>The battery voltage in volts </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only</dd></dl>
<p>If the temperature is above the set point then calculate a commands for each motor that will result in a safe current. </p>

</div>
</div>
<a class="anchor" id="ad671e19c837b6b1f3ae95bf85d4f2166"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorMonitorCurrent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmart_motor.html">smartMotor</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>v_battery</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Monitor Motor Current. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to <a class="el" href="structsmart_motor.html">smartMotor</a> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_battery</td><td>The battery voltage in volts </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only </dd></dl>

</div>
</div>
<a class="anchor" id="a824d6d1c9472b7f86b3cf07a233144e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartMotorControllerSetLed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="smartmotor_8h.html#a038312e31f0a150c09f5b50ee3a1121a">smartController</a> *&#160;</td>
          <td class="paramname"><em>s</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current monitor LED on or off. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>Pointer to smartController structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Internal smartMotorLibrary function, do not call, ref only</dd></dl>
<p>Turn on status LED if either controller ptc is tripped or any connected motors are tripped. LED is only turned on in this function as it may be shared between more then one controller. The LED is briefly turned off each loop around the calling task but only remains off for a very short period which is inperceptable. </p>

</div>
</div>
<a class="anchor" id="affafa43d662163258c459227c42c32b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t SmartMotorTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The smart motor task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>pointer to user data (not used) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Running a little different in this version, instead of a 100mS delay and then calculations on each motor we do one motor each iteration </dd></dl>

</div>
</div>
<a class="anchor" id="a7e1dfd9a54afaeb2f0cd8ec6d1de4e9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t SmartMotorSlewRateTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The motor slew rate task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>pointer to user data (not used)</td></tr>
  </table>
  </dd>
</dl>
<p>Task - compares the requested speed of each motor to the actual speed and increments or decrements to reduce the difference as necessary </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_39cce2f8bb217932b254ee6294567f16.html">vex</a></li><li class="navelem"><a class="el" href="dir_b5e8d6cab5ffd968b3bd427c6c6f2b80.html">cortex</a></li><li class="navelem"><a class="el" href="dir_9e5b02898a8d6230f8834953bb890d5b.html">opt</a></li><li class="navelem"><a class="el" href="smartmotor_8c.html">smartmotor.c</a></li>
    <li class="footer">Generated on Tue Jun 25 2013 10:11:00 for Convex by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
